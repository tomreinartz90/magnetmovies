function translate(langData){setGenres(langData.genres),setSorts(langData.sort)}function setGenres(genres){num=0,$.each(genres,function(index,value){checked="all"==index?"checked":"",$("#genre .content").append('<div class="switch round radius"><input id="GenreSwitch'+num+'" type="radio" '+checked+' name="genre" value="'+index+'"><label for="GenreSwitch'+num+'">'+value+"</label> </div>"),num++})}function setSorts(sorts){num2=0,$.each(sorts,function(index,value){checked="seeds"==index?"checked":"",$("#sort .content").append('<div class="switch round radius"><input id="sortSwitch'+num2+'" type="radio" '+checked+' name="sort" value="'+index+'"><label for="sortSwitch'+num2+'">'+value+"</label> </div>"),num2++})}function getXbmcMovies(XBMCdata){console.log("movies"),xbmc.data={},XBMCdata=$.parseJSON(XBMCdata),xbmc.movies.data=XBMCdata,xbmc.hideMovieItems()}function getXbmcSeries(XBMCdata){console.log("series"),XBMCdata=$.parseJSON(XBMCdata),xbmc.series.data=XBMCdata,console.log(xbmc.series.data),$.each(XBMCdata.result.tvshows,function(index,value){xbmc.series.list[value.imdbnumber]=value.label,xbmc.series.tvshows.push(value.tvshowid),console.log(value.label)}),getXbmcEpisodes()}function getXbmcEpisodes(){xbmc.Socket.isPending?setTimeout(getXbmcEpisodes,500):(this.method="VideoLibrary.GetSeasons",this.params={tvshowid:xbmc.series.tvshows[item]},item++,console.log(item<xbmc.series.tvshows.length),xbmc.Socket.send(getXbmcEpisodes.method,getXbmcEpisodes.params,item,getXbmcEpisodes),item<xbmc.series.tvshows.length)}function log(data){dev&&console.log(data)}function activateDownload(){localStorage.setItem("downloadable",!0)}var movieDB={url:"https://api.themoviedb.org/3/movie/",imgUrl:"http://image.tmdb.org/t/p/w500/",settings:{api_key:"ffbd2b663d53a66c2dd00bb517491490"},aantalItems:0,getData:function(imdbID){if(imdbID){if(movieStorage=JSON.parse(localStorage.getItem("movieStorage")),void 0!==movieStorage[imdbID])return movieDB.processData(movieStorage[imdbID],imdbID),movieDBserie.aantalItems+=1,movieDBserie.aantalItems==aantalFilms&&log("movieDBserie informatie opgehaald"),void 0;var url=movieDB.url+imdbID;$.ajax({url:url,type:"get",data:{api_key:movieDB.settings.api_key},error:function(jqXHR,textStatus,errorThrown){(404==jqXHR.status||"Not Found"==errorThrown)&&(movieDB.aantalItems+=1,filmlijst[imdbID]=null,delete filmlijst[imdbID])}}).done(function(data){movieStorage[imdbID]=data,localStorage.setItem("movieStorage",JSON.stringify(movieStorage)),movieDB.processData(data,imdbID)})}},processData:function(data,imdbID){filmlijst[imdbID].plot=data.overview,filmlijst[imdbID].poster=movieDB.imgUrl+data.poster_path,movieDB.aantalItems+=1,movieDB.aantalItems==aantalFilms&&(log("movieDB informatie opgehaald"),app.toonFilmItems()),vidUrl=movieDB.url+data.id+"/videos",$.getJSON(vidUrl,{api_key:movieDB.settings.api_key}).done(function(data){filmlijst[imdbID].trailer=data.results.length>0?data.results[0].key:null})}},movieDBserie={url:"http://api.themoviedb.org/3/",search:"search/tv",series:"tv/",imgUrl:"http://image.tmdb.org/t/p/w500/",backDropUrl:"http://image.tmdb.org/t/p/w1280/",settings:{api_key:movieDB.settings.api_key},aantalItems:0,getData:function(imdbID){if(imdbID){if(serieStorage=JSON.parse(localStorage.getItem("serieStorage")),void 0!==serieStorage[imdbID])return serieslijst[imdbID].movieDBData=serieStorage[imdbID],movieDBserie.aantalItems+=1,movieDBserie.aantalItems==aantalFilms&&log("movieDBserie informatie opgehaald"),void 0;if(0===serieslijst[imdbID].movieDBid)return movieDBserie.getMovieDBid(imdbID),void 0;var url=movieDBserie.url+movieDBserie.series+serieslijst[imdbID].movieDBid;$.ajax({url:url,type:"get",data:{api_key:movieDBserie.settings.api_key}}).done(function(data){console.log(data),serieslijst[imdbID].movieDBData=data,serieStorage[imdbID]=data,localStorage.setItem("serieStorage",JSON.stringify(serieStorage)),movieDBserie.aantalItems+=1,movieDBserie.aantalItems==aantalFilms&&log("movieDBserie informatie opgehaald")})}},getMovieDBid:function(imdbID){var name=serieslijst[imdbID].naam;url=movieDBserie.url+movieDBserie.search,$.ajax({url:url,type:"get",data:{api_key:movieDBserie.settings.api_key,query:name}}).done(function(data){serieslijst[imdbID].movieDBid=data.results[0].id,movieDBserie.getData(imdbID)})}},yify={url:"https://yts.re/api/list.json",settings:{limit:"30",set:1,rating:"6",sort:"seeds",quality:"ALL",keywords:"",genre:"all",order:"desc"},data:{},aantalItems:0,getData:function(){yify.data=$.getJSON(yify.url,yify.settings).done(function(){"200"==yify.data.status?(log("yify data is opgehaald"),app.maakFilmLijst(yify.data)):yify.getData()})}},eztv={socket:"http://www.tomreinartz.com/magnetwall/socket.php?url=",url:"http://eztvapi.re/",settings:{keywords:"",set:1},data:{},aantalItems:0,getData:function(){console.log("eztv"),$.getJSON(eztv.socket+eztv.url+"shows/"+eztv.settings.set+"?keywords="+eztv.settings.keywords,function(data){log("loop"),eztv.data=data,console.log(data),$.each(data,function(index,value){serie={},serie.naam=value.title,serie.seizoenen=value.num_seasons,serie.poster=value.images.poster,serie.uitgebracht=value.year,serie.genre=value.Genre,serie.rating=value.MovieRating,serie.imdbID=value._id,serie.num=yify.aantalItems,serie.movieDBid=0,serie.movieDBData={},serie.season={},s=1,serieslijst[value._id]=serie,eztv.getEpisodes(value._id),app.getMovieDBserieData(value._id)}),app.toonSerieItems()})},getEpisodes:function(imdbID){$.getJSON(eztv.socket+eztv.url+"show/"+imdbID,function(data){$.each(data.episodes,function(index,value){epi={},epi.naam=value.title,epi.uitgebracht=value.first_aired,epi.genre=value.genres,epi.magnetLink=value.torrents,epi.plot=value.overview,epi.tvdbid=value.tvdb_id,s=value.season,e=value.episode,void 0==serieslijst[imdbID].season[s]&&(serieslijst[imdbID].season[s]={},serieslijst[imdbID].season[s].episode={}),void 0!=serieslijst[imdbID].season[s]&&(serieslijst[imdbID].season[s].episode[e]=epi)})})}},generateMovieList={info:"",start:function(data){moviecount=data.responseJSON.MovieCount,data=data.responseJSON.MovieList,log("begin met verwerken van yify data"),moviecount>0?($.each(data,function(index,value){filmBestaat=!1,void 0!=filmlijst[value.ImdbCode]&&(filmBestaat=!0),film={naam:"",geupload:"",uitgebracht:"",genre:"",kwaliteit:"",rating:"",poster:"",imdbID:"",magnetLink:[],plot:"",trailer:"",num:""},filmBestaat&&(film=filmlijst[value.ImdbCode]),film.naam=value.MovieTitleClean,film.geupload=value.DateUploaded,film.uitgebracht=value.MovieYear,film.genre=value.Genre,film.kwaliteit+=value.Quality+" ",film.rating=value.MovieRating,film.imdbID=value.ImdbCode,film.magnetLink[value.Quality]=value.TorrentMagnetUrl,film.num=aantalFilms,filmlijst[value.ImdbCode]=film,aantalFilms+=1}),log("yify data is verwerkt"),$.each(data,function(index,value){movieDB.getData(value.ImdbCode)})):(status="niet meer films beschikbaar",app.loader(!1))}};FilmItems={toonFilms:function(data){$.each(data,function(index,value){FilmItems.isFilmGetoond(index)||$("#content").append(FilmItems.generateFilmItem(value))}),status="klaar",app.loader(!1)},isFilmGetoond:function(imdbID){var aanwezig=!1;return 0!=$('a[data-imdbid="'+imdbID+'"]').length&&(aanwezig=!0),aanwezig},generateFilmItem:function(data){return cssClass="",film='<div class="'+cssClass+' filmItemHouder small-6 medium-4 large-2 xlarge-2 columns"><a class="filmitem" href="#'+data.uitgebracht+'" data-imdbid="'+data.imdbID+'" data-dropdown="drop'+data.num+'" data-options="is_hover:true">',film+='<img width="100%" src="'+data.poster+'"/></a><h5>'+data.naam+"</h5><h6>"+data.uitgebracht,"true"==activateDownloads&&(void 0!=data.magnetLink["720p"]&&(film+=' <a href="'+data.magnetLink["720p"]+'">720p</a>'),void 0!=data.magnetLink["1080p"]&&(film+=' <a href="'+data.magnetLink["1080p"]+'">1080p</a>'),void 0!=data.magnetLink["3D"]),film+="</h6></div> "}},serieItems={toonSerie:function(data){var serie={};return cssClass="",serie='<div class="'+cssClass+' filmItemHouder small-6 medium-4 large-2 xlarge-2 columns"><a class="filmitem" href="#'+data.uitgebracht+'" data-imdbid="'+data.imdbID+'" data-dropdown="drop'+data.num+'" data-options="is_hover:true">',serie+='<img width="100%" src="'+data.poster+'"/></a><h5>'+data.naam+"</h5><h6>"+data.uitgebracht,serie+="</h6></div> "},tooonSeries:function(data){$.each(data,function(index,value){serieItems.isSerieGetoond(index)||$("#content").append(serieItems.toonSerie(value))}),status="klaar",app.loader(!1)},isSerieGetoond:function(imdbID){var aanwezig=!1;return 0!=$('a[data-imdbid="'+imdbID+'"]').length&&(aanwezig=!0),aanwezig}};var XBMCSocket=function(){this.socket,this.path,this.isConnected=!1,this.isPending=!1,this.context,this.callback;var thisObject=this;this.connect=function(host,port,context){if(void 0!=host&&void 0!=port){if(thisObject.path="ws://"+host+":"+port+"/jsonrpc",!thisObject.path)return alert("host is not configured!"),void 0;if(!window.WebSocket)return alert("Web socket is not supported in your browser!"),void 0;thisObject.socket&&thisObject.socket.close(),thisObject.context=context,thisObject.socket=new WebSocket(thisObject.path),thisObject.socket.onopen=onOpen,thisObject.socket.onerror=onError,thisObject.socket.onmessage=onMessage,thisObject.socket.onclose=onClose}},this.disconnect=function(){thisObject.socket&&thisObject.socket.close()};var onOpen=function(){console.log("socket open"),thisObject.isConnected=!0,thisObject.context&&thisObject.context.onConnect()},onError=function(error){thisObject.isPending=!1,console.log("socket error "+error),thisObject.callback=null},onMessage=function(event){thisObject.isPending=!1,thisObject.callback&&(console.log("has callback!"),thisObject.callback(event.data),thisObject.callback=null)};this.send=function(method,params,id,callback){if(!thisObject.isConnected)return alert("connection error! Socket is not connected."),void 0;thisObject.callback=callback;var data={jsonrpc:"2.0",method:method,id:id};return params&&(data.params=params),1==thisObject.isPending?(console.warn("a request is still pending!"),void 0):(thisObject.isPending=!0,thisObject.socket.send(JSON.stringify(data)),void 0)};var onClose=function(){console.log("socket closed!"),thisObject.isPending=!1,thisObject.isConnected=!1,thisObject.context&&thisObject.context.onClose()}},lang=navigator.language||navigator.userLanguage;"nl"!=lang&&"en"!=lang&&(lang="en"),$.getJSON("js/lang/"+lang+".json",function(data){langData=data,translate(langData)});var modal={showMovie:function(){$("#filmModal #titel").html(data.naam),$("#filmModal #plot").html(data.plot),$("#filmModal #genre").html(data.genre),$("#filmModal #kwaliteit").html(data.kwaliteit),$("#filmModal #rating").html(data.rating),$("#filmModal #geupload").html(data.geupload),$("#filmModal #trailer").attr("src","http://www.youtube.com/embed/"+data.trailer),$("#filmModal .button").attr("href","#"),"true"==localStorage.getItem("downloadable")&&($("#filmModal #download720p").attr("href",data.magnetLink["720p"]),$("#filmModal #download1080p").attr("href",data.magnetLink["1080p"]),$("#filmModal #download3D").attr("href",data.magnetLink["3D"])),$("#filmModal").foundation("reveal","open",{animation:"fade",animation_speed:50,close_on_background_click:!0,dismiss_modal_class:"close-reveal-modal",bg_class:"reveal-modal-bg",root_element:"body",bg:$(".reveal-modal-bg"),css:{open:{opacity:0,visibility:"visible",display:"block"},close:{opacity:1,visibility:"hidden",display:"none"}}})},showSerie:function(serieObject){var data=serieObject;console.log(data),$("#serieModal #titel").html(data.naam),$("#serieModal #plot").html(data.movieDBData.overview),$("#serieModal #genre").html(data.genre),$("#serieModal #kwaliteit").html(data.kwaliteit),$("#serieModal #rating").html(data.movieDBData.vote_average),$("#serieModal #geupload").html(data.geupload),$("#serieModal #poster").attr("src",data.poster),$("#serieModal .button").attr("href","#"),$("#serieModal .seasons").html(""),$("#serieModal .episodes").html(""),$("#serieModal").css("background-image","url("+movieDBserie.backDropUrl+data.movieDBData.backdrop_path+")"),console.log(data.season),$.each(data.season,function(index,value){log(index);var season=index,data=value,tab='<dd><a href="#panel'+season+'">'+season+"</a></dd>",content='<div class="content" id="panel'+season+'"></div>';$("#serieModal .seasons").prepend(tab),$("#serieModal .episodes").prepend(content),$.each(data.episode,function(index,value){var episode=index,data=value,downloads=data.magnetLink,link="",quality="";void 0!=downloads["1080p"]?(link=downloads["1080p"].url,quality="1080p"):void 0!=downloads["720p"]?(link=downloads["720p"].url,quality="720p"):void 0!=downloads["480p"]?(link=downloads["480p"].url,quality="480p"):(link=downloads["0"].url,quality="unknown"),$("#serieModal #panel"+season+" ").prepend('<a class="button" href="'+link+'">season '+season+" episode "+episode+" - "+quality+"</a>")})}),$("#serieModal .seasons > dd:nth-of-type(1)").addClass("active"),$("#serieModal .episodes > div:nth-of-type(1)").addClass("active"),$("#serieModal").foundation("reveal","open",{animation:"fadeAndPop",animation_speed:250,close_on_background_click:!0,dismiss_modal_class:"close-reveal-modal",bg_class:"reveal-modal-bg",root_element:"body",bg:$(".reveal-modal-bg"),css:{open:{opacity:0,visibility:"visible",display:"block"},close:{opacity:1,visibility:"hidden",display:"none"}}})}};$("#content").on("click",".filmitem",function(){var id=$(this).data("imdbid");void 0!=filmlijst[id]?(data=filmlijst[id],modal.showMovie(data)):void 0!=serieslijst[id]&&(data=serieslijst[id],modal.showSerie(data))}),$(".off-canvas-list").on("click",".navigation",function(){$(this).parent().hasClass("open")?$(this).parent().removeClass("open"):($(".off-canvas-list .open").removeClass("open"),$(this).parent().addClass("open"))}),$(".mode-films").on("click",function(){$(this).addClass("disabled"),$(".film-zoeker").show(),$(".mode-series").removeClass("disabled"),$(".filmItemHouder").remove(),localStorage.setItem("app.mode","movies"),app.mode="movies",filmlijst={},serieslijst={},yify.settings.set=1,yify.data={},app.run()}),$(".mode-series").on("click",function(){$(this).addClass("disabled"),$(".film-zoeker").hide(),$(".mode-films").removeClass("disabled"),$(".filmItemHouder").remove(),localStorage.setItem("app.mode","series"),app.mode="series",filmlijst={},serieslijst={},eztv.settings.set=1,eztv.data={},app.run()}),$("#zoek").on("click",function(){yify.settings={set:1,limit:"30",rating:$(".zoeken #imdbRating").val(),sort:$(".zoeken input[name=sort]:checked").val(),quality:$(".zoeken input[name=quality]:checked").val(),keywords:$(".zoeken #keywords").val(),genre:$(".zoeken input[name=genre]:checked").val(),order:$(".zoeken input[name=order]:checked").val()},localStorage.setItem("app.mode","movies"),app.mode="movies",filmlijst={},serieslijst={},yify.settings.set=1,yify.data={},$(".filmItemHouder").remove(),app.run()}),$(".mobile-search").on("click",function(){$("#standard-menu").toggleClass("show-for-medium-up")});var xbmc={url:"192.168.1.198",movies:{settings:{jsonrpc:"2.0",method:"VideoLibrary.GetMovies",params:{properties:["imdbnumber"]},id:"1"},data:null,list:[]},series:{settings:{jsonrpc:"2.0",method:"VideoLibrary.GetTVShows",params:{properties:["rating","imdbnumber","playcount"]},id:"2"},data:null,list:[],tvshows:[]},data:null,list:[],action:"hide",cssClass:"",connect:function(){},getData:function(){},hideMovieItems:function(){$.each(xbmc.movies.data.result.movies,function(index,value){void 0!=filmlijst[value.imdbnumber]&&(xbmc.action="hide")&&($('a[data-imdbid="'+value.imdbnumber+'"]').parent().addClass("hideXBMC"),xbmc.cssClass="hideXBMC")})}};localStorage.getItem("xbmcHost"),xbmc.Socket=new XBMCSocket,xbmc.connect=function(){status="busy",console.log("Begin met ophalen xbmc data"),void 0===xbmc.movies.data.result&&xbmc.Socket.connect(xbmc.url,"9090")},xbmc.getData=function(){void 0!==xbmc.url&&null!==xbmc.url&&(xbmc.Socket.isConnected&&!xbmc.Socket.isPending&&null==xbmc.movies.data&&xbmc.Socket.send(xbmc.movies.settings.method,xbmc.movies.settings.params,xbmc.movies.settings.id,getXbmcMovies),null==xbmc.movies.data||null==xbmc.series.data,setTimeout(xbmc.getData,500))},item=0;var dev=!0,filmlijst={},aantalFilms=0,serieslijst={},serieStorage={},movieStorage={},status="wachten",activateDownloads=localStorage.getItem("downloadable");"true"==activateDownloads&&log("downloads activated"),log(localStorage.getItem("filmlijst")),$("#XBMCadress").focusout(function(){var url=this.value;"activatedownloads"==url||"download"==url||"ActivateDownloads"==url||"activateDownloads"==url?(localStorage.setItem("downloadable",!0),alert("you can now download")):(localStorage.setItem("xbmcUrl",url),alert("XBMC adress hes "))}),null===localStorage.getItem("movieStorage")&&localStorage.setItem("movieStorage","{}"),null===localStorage.getItem("serieStorage")&&localStorage.setItem("serieStorage","{}");var app={mode:"movies",run:function(){null!==localStorage.getItem("app.mode")&&(app.mode=localStorage.getItem("app.mode")),xbmc.connect(),log(app.mode),status="run",$("#standard-menu").addClass("show-for-medium-up"),app.loader(!0),"movies"==app.mode?yify.getData():"series"==app.mode&&eztv.getData()},maakFilmLijst:function(){log("filmlijst genereren");var films=yify.data;generateMovieList.start(films)},getMovieDbData:function(imdbID){movieDB.getData(imdbID)},getMovieDBserieData:function(imdbID){movieDBserie.getData(imdbID)},toonFilmItems:function(){FilmItems.toonFilms(filmlijst),console.log(filmlijst),localStorage.setItem("filmslijst",JSON.stringify(filmlijst)),xbmc.hideMovieItems()},toonSerieItems:function(){serieItems.tooonSeries(serieslijst),localStorage.setItem("serieslijst",JSON.stringify(serieslijst))},setMaxMoviePosterHeight:function(){$(".filmitem img").length>1&&($(".filmitem img").css({height:""}),maxHeight=$(".filmitem img")[0].height,$(".filmitem img").css({"max-height":maxHeight}))},loader:function(show){log("showloader "+show),show?$("body").append('<div id="loader" class="preloader"></div>'):$("#loader").remove()}};app.run(),$(window).resize(function(){app.setMaxMoviePosterHeight()}),$(".filmitem img").load(function(){app.setMaxMoviePosterHeight()}),$("#content").scroll(function(){hoogte=$("div #content")[0].scrollHeight+1,app.setMaxMoviePosterHeight(),scrollPositie=$("#content").scrollTop()+$("#content").height(),100>hoogte-scrollPositie&&"klaar"==status&&("movies"==app.mode?(yify.settings.set=yify.settings.set+1,yify.data={},app.run()):"series"==app.mode&&(eztv.settings.set=eztv.settings.set+1,log(eztv.settings.set),eztv.data={},app.run()))});
//# sourceMappingURL=app.min.js.map