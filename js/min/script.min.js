function newWall(e){yify.settings=e,yify.settings.set=1,filmlijst={},yify.data={},theMovieDB.data={},$(".filmItemHouder").remove(),loader(!0),getYifyData(),trackname=$.param(e),ga("send","pageview",trackname)}function getYifyData(){status="busy",null==xbmc.data&&null!=xbmc.url&&xbmc.connect(),console.log("Begin met ophalen yify data");var e=yify.url;yify.data=$.getJSON(e,{limit:yify.settings.limit,set:yify.settings.set,rating:yify.settings.rating,sort:yify.settings.sort,quality:yify.settings.quality,keywords:yify.settings.keywords,genre:yify.settings.genre,order:yify.settings.order}).done(function(){"200"==yify.data.status?(console.log("yify data succesvol opgehaald"),maakFilmLijst(yify.data)):(console.log("fout bij ophalen yify data, we proberen het nog een keer."),getYifyData())})}function getEztvData(){keywords="",console.log("eztv"),$.getJSON("http://www.tomreinartz.com/magnetwall/socket.php?url="+eztv.url+"shows/"+eztv.page+"?keywords="+keywords).done(function(e){eztv.data=e,$.each(e,function(e,t){for(serie={},serie.naam=t.title,serie.seizoenen=t.num_seasons,serie.poster=t.images.poster,serie.uitgebracht=t.year,serie.genre=t.Genre,serie.rating=t.MovieRating,serie.imdbID=t._id,serie.num=yify.aantalItems,serie.season={},s=1;s<=serie.seizoenen;)serie.season[s]={},serie.season[s].episode={},s+=1;serieslijst[t._id]=serie,getEztvEpisodes(t._id)}),console.log(serieslijst),console.log(serieslijst),toonFilms(serieslijst)})}function getEztvEpisodes(t){$.getJSON("http://www.tomreinartz.com/magnetwall/socket.php?url="+eztv.url+"show/"+t).done(function(i){$.each(i.episodes,function(i,a){epi={},epi.naam=a.title,epi.uitgebracht=a.first_aired,epi.genre=a.genres,epi.magnetLink=a.torrents,epi.plot=a.overview,epi.tvdbid=a.tvdb_id,s=a.season,e=a.episode,serieslijst[t].season[s].episode[e]=epi})})}function getXbmcMovies(e){xbmc.data={},e=$.parseJSON(e),xbmc.movies.data=e,$.each(e.result.movies,function(e,t){xbmc.movies.list[t.imdbnumber]=t.label,void 0!=filmlijst[t.imdbnumber]&&(xbmc.action="hide")&&($('a[data-imdbid="'+t.imdbnumber+'"]').parent().addClass("hideXBMC"),xbmc.cssClass="hideXBMC")})}function getXbmcSeries(e){console.log("series"),e=$.parseJSON(e),xbmc.series.data=e,console.log(xbmc.series.data),$.each(e.result.tvshows,function(e,t){xbmc.series.list[t.imdbnumber]=t.label,xbmc.series.tvshows.push(t.tvshowid),console.log(t.label)}),getXbmcEpisodes()}function getXbmcEpisodes(){xbmc.Socket.isPending?setTimeout(getXbmcEpisodes,500):(this.method="VideoLibrary.GetSeasons",this.params={tvshowid:xbmc.series.tvshows[item]},item++,console.log(item<xbmc.series.tvshows.length),xbmc.Socket.send(getXbmcEpisodes.method,getXbmcEpisodes.params,item,getXbmcEpisodes),item<xbmc.series.tvshows.length)}function setMovieDBData(e){if(e){var t=theMovieDB.url+e;$.getJSON(t,{api_key:theMovieDB.settings.api_key}).done(function(t){filmlijst[e].plot=t.overview,filmlijst[e].poster=theMovieDB.imgUrl+t.poster_path,vidUrl=theMovieDB.url+t.id+"/videos",$.getJSON(vidUrl,{api_key:theMovieDB.settings.api_key}).done(function(t){filmlijst[e].trailer=t.results.length>0?t.results[0].key:null}),theMovieDB.aantalItems+=1,theMovieDB.aantalItems==yify.aantalItems&&toonFilms(filmlijst)})}else console.log("Geen imdbID om informatie op te halen.")}function maakFilmLijst(e){moviecount=e.responseJSON.MovieCount,e=e.responseJSON.MovieList,status="begin met verwerken van yify data",moviecount>0?$.each(e,function(e,t){filmBestaat=!1,void 0!=filmlijst[t.ImdbCode]&&(filmBestaat=!0),film={naam:"",geupload:"",uitgebracht:"",genre:"",kwaliteit:"",rating:"",poster:"",imdbID:"",magnetLink:[],plot:"",trailer:"",num:""},filmBestaat&&(film=filmlijst[t.ImdbCode]),film.naam=t.MovieTitleClean,film.geupload=t.DateUploaded,film.uitgebracht=t.MovieYear,film.genre=t.Genre,film.kwaliteit+=t.Quality+" ",film.rating=t.MovieRating,film.imdbID=t.ImdbCode,film.magnetLink[t.Quality]=t.TorrentMagnetUrl,film.num=yify.aantalItems,filmlijst[t.ImdbCode]=film}):(status="niet meer films beschikbaar",loader(!1)),status="yify data is verwerkt"}function toonFilms(e){$.each(e,function(e,t){isFilmGetoond(e)||$("#content").append(toonFilmItem(t))}),$(".filmitem img").load(function(){setMaxMoviePosterHeight()}),status="klaar",loader(!1)}function isFilmGetoond(e){var t=!1;return 0!=$('a[data-imdbid="'+e+'"]').length&&(t=!0),t}function toonFilmItem(e){return cssClass=void 0!=xbmc.list[e.imdbID]?xbmc.cssClass:"",film='<div class="'+cssClass+' filmItemHouder small-6 medium-4 large-2 xlarge-2 columns"><a class="filmitem" href="#'+e.uitgebracht+'" data-imdbid="'+e.imdbID+'" data-dropdown="drop'+e.num+'" data-options="is_hover:true">',film+='<img width="100%" src="'+e.poster+'"/><br><h5>'+e.naam+"</h5><h6>"+e.uitgebracht+"</h6></a>"}function loader(e){e?$("#content").prepend('<div id="loader" class="preloader"></div>'):$("#loader").remove()}function setMaxMoviePosterHeight(){$(".filmitem img").css({height:""}),maxHeight=$(".filmitem img")[0].height,$(".filmitem img").css({height:maxHeight})}function activateDownloads(){localStorage.setItem("downloadable",!0),console.log("you can now download")}var yify={url:"https://yts.re/api/list.json",settings:{limit:"50",set:1,rating:"6",sort:"seeds",quality:"ALL",keywords:"",genre:"all",order:"desc"},data:{},aantalItems:0},eztv={url:"http://eztvapi.re/",page:1,data:{},aantalItems:0},theMovieDB={url:"https://api.themoviedb.org/3/movie/",imgUrl:"http://image.tmdb.org/t/p/w500/",settings:{api_key:"ffbd2b663d53a66c2dd00bb517491490"},aantalItems:0},xbmc={url:null,movies:{settings:{jsonrpc:"2.0",method:"VideoLibrary.GetMovies",params:{properties:["imdbnumber"]},id:"1"},data:null,list:[]},series:{settings:{jsonrpc:"2.0",method:"VideoLibrary.GetTVShows",params:{properties:["rating","imdbnumber","playcount"]},id:"2"},data:null,list:[],tvshows:[]},data:null,list:[],action:"hide",cssClass:"",connect:function(){},getData:function(){}};localStorage.getItem("xbmcHost")&&(xbmc.url=localStorage.getItem("xbmcHost")),xbmc.Socket=new XBMCSocket,xbmc.connect=function(){status="busy",console.log("Begin met ophalen xbmc data"),xbmc.Socket.connect(xbmc.url,"9090"),xbmc.getData()},xbmc.getData=function(){xbmc.Socket.isConnected&&!xbmc.Socket.isPending&&null==xbmc.movies.data?xbmc.Socket.send(xbmc.movies.settings.method,xbmc.movies.settings.params,xbmc.movies.settings.id,getXbmcMovies):xbmc.Socket.isConnected&&!xbmc.Socket.isPending&&null==xbmc.series.data&&xbmc.Socket.send(xbmc.series.settings.method,xbmc.series.settings.params,xbmc.series.settings.id,getXbmcSeries),null==xbmc.movies.data||null==xbmc.series.data,setTimeout(xbmc.getData,500)};var filmlijst={},serieslijst={},afleveringenlijst={},status="none";getEztvData(),$("#zoek").on("click",function(){var e={limit:"50",rating:$(".zoeken #imdbRating").val(),sort:$(".zoeken input[name=sort]:checked").val(),quality:$(".zoeken input[name=quality]:checked").val(),keywords:$(".zoeken #keywords").val(),genre:$(".zoeken input[name=genre]:checked").val(),order:$(".zoeken input[name=order]:checked").val()};newWall(e)}),item=0,$("#content").scroll(function(){hoogte=$("div #content")[0].scrollHeight+1,scrollPositie=$("#content").scrollTop()+$("#content").height(),100>hoogte-scrollPositie&&"klaar"==status&&(loader(!0),yify.settings.set=yify.settings.set+1,yify.data={},getYifyData())}),$("#XBMCadress").focusout(function(){var e=this.value;e=e,xbmc.url=e,localStorage.setItem("xbmcHost",xbmc.url),getXBMCData()}),$("#content").on("click",".filmitem",function(){var e=$(this).data("imdbid"),t="";console.log(serieslijst[e]),void 0!=filmlijst[e]?(data=filmlijst[e],t="film"):void 0!=serieslijst[e]&&(data=serieslijst[e],t="serie"),"film"==t?($("#filmModal #titel").html(data.naam),$("#filmModal #plot").html(data.plot),$("#filmModal #genre").html(data.genre),$("#filmModal #kwaliteit").html(data.kwaliteit),$("#filmModal #rating").html(data.rating),$("#filmModal #geupload").html(data.geupload),$("#filmModal #trailer").attr("src","http://www.youtube.com/embed/"+data.trailer),$("#filmModal .button").attr("href","#"),"true"==localStorage.getItem("downloadable")&&($("#filmModal #download720p").attr("href",data.magnetLink["720p"]),$("#filmModal #download1080p").attr("href",data.magnetLink["1080p"]),$("#filmModal #download3D").attr("href",data.magnetLink["3D"])),$("#filmModal").foundation("reveal","open",{animation:"fadeAndPop",animation_speed:250,close_on_background_click:!0,dismiss_modal_class:"close-reveal-modal",bg_class:"reveal-modal-bg",root_element:"body",bg:$(".reveal-modal-bg"),css:{open:{opacity:0,visibility:"visible",display:"block"},close:{opacity:1,visibility:"hidden",display:"none"}}}),trackname=data.imdbID+" - "+data.naam,ga("send","pageview",trackname)):"serie"==t&&(console.log("serie"),$("#serieModal #titel").html(data.naam),$("#serieModal #plot").html(data.plot),$("#serieModal #genre").html(data.genre),$("#serieModal #kwaliteit").html(data.kwaliteit),$("#serieModal #rating").html(data.rating),$("#serieModal #geupload").html(data.geupload),$("#serieModal .button").attr("href","#"),console.log(data),$.each(data.season,function(e,t){var i=e,a=t;$.each(a.episode,function(e,t){var a=e,s=t,o=s.magnetLink,l="",n="";void 0!=o["1080p"]?(l=o["1080p"].url,n="1080p"):void 0!=o["720p"]?(l=o["720p"].url,n="720p"):void 0!=o["480p"]?(l=o["480p"].url,n="480p"):(l=o["0"].url,n="unknown"),$("#serieModal #episodes").prepend('<a href="'+l+'">season '+i+" episode "+a+" - "+n+"</a><br>")})}),"true"==localStorage.getItem("downloadable")&&($("#serieModal #download720p").attr("href",data.magnetLink["720p"]),$("#serieModal #download1080p").attr("href",data.magnetLink["1080p"]),$("#serieModal #download3D").attr("href",data.magnetLink["3D"])),$("#serieModal").foundation("reveal","open",{animation:"fadeAndPop",animation_speed:250,close_on_background_click:!0,dismiss_modal_class:"close-reveal-modal",bg_class:"reveal-modal-bg",root_element:"body",bg:$(".reveal-modal-bg"),css:{open:{opacity:0,visibility:"visible",display:"block"},close:{opacity:1,visibility:"hidden",display:"none"}}}))}),$(".off-canvas-list").on("click",".navigation",function(){$(this).parent().hasClass("open")?$(this).parent().removeClass("open"):($(".off-canvas-list .open").removeClass("open"),$(this).parent().addClass("open"))});